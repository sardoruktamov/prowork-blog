{% extends 'base.html' %}
{% load static %}

{% block title %}
    <title>Bizda dunyodagi eng so`ngi yangiliklar</title>
{% endblock title %}

{% block content %}
<div class="container">
	<!-- Top box -->
		<!-- Logo & Site Name -->
		<div class="placeholder">
			<div class="parallax-window" data-parallax="scroll" data-image-src="{% static 'img/simple-house-01.jpg' %}">
				<div class="tm-header">
					<div class="row tm-header-inner">
						<div class="col-md-6 col-12">
							<img src="{% static 'img/simple-house-logo.png' %}" alt="Logo" class="tm-site-logo" /> 
							<div class="tm-site-text-box">
								<h1 class="tm-site-title">Texnologiyalar Blogi</h1>
								<h6 class="tm-site-description">Hozirgi zamonning eng so'ngi ma'lumotlari</h6>	
							</div>
						</div>
						<nav class="col-md-6 col-12 tm-nav">
							<ul class="tm-nav-ul">
								<li class="tm-nav-li"><a href="{% url 'home-view' %}" class="tm-nav-link active">BARCHASI</a></li>
                                {% for cat in categories %}
								<li class="tm-nav-li"><a href="{% url 'filter-category' cat.slug %}" class="tm-nav-link">{{cat.name}}</a></li>
                                {% endfor %}
							</ul>
						</nav>	
					</div>
				</div>
			</div>
		</div>

		<main>
			<header class="row pt-5">
			</header>
			
			<div class="tm-paging-links">
				<nav>
					<ul>viloyatlar: 
					{% for region in regions %}
						<li class="tm-paging-item"><a href="{% url 'filter-region' region.slug %}" class="tm-paging-link active">{{region}}</a></li>
					{% endfor %}
					</ul>
				</nav>
				<nav>
					<ul>hashtegs:
					{% for hashteg in hashtegs %}
						<li class="tm-paging-item"><a href="{% url 'filter-hashtegs' hashteg.slug %}" class="tm-paging-link active">{{hashteg}}</a></li>
					{% endfor %}
					</ul>
				</nav>
			</div>
			<!-- Gallery -->
			<div class="row tm-gallery">
				<!-- gallery page 1 -->
				<div id="tm-gallery-page-pizza" class="tm-gallery-page">
					{% if blogs %}
					{% for blog in blogs %}
					<article class="col-lg-3 col-md-4 col-sm-6 col-12 tm-gallery-item">
						<figure>
							<img src="{{blog.image.url}}" alt="Image" class="img-fluid tm-gallery-img" />
							<figcaption>
								<a href="{% url 'blog-detail' blog.slug %}"<h4 class="tm-gallery-title">{{blog.title | truncatechars:50}}</h4></a>
								<p class="tm-gallery-description">{{blog.description | truncatechars:120}}</p>
								<p class="tm-gallery-price">{{blog.created_at}}</p>
							</figcaption>
						</figure>
					</article>
					{% endfor %}
					{% else %}
						<figure>
							<figcaption>
								<h4 class="tm-gallery-title"> Post mavjud emas!</h4>
							</figcaption>
						</figure>
					{% endif %}
				</div> <!-- gallery page 1 -->
				
				
			</div>
		</main>
		<div class="container">
      <nav class="blog-pagination justify-content-center d-flex">
        <ul class="pagination">
            <li id="page-item">{% if blogs.has_previous %}
                <a href="?page={{blogs.previous_page_number}}" class="page-link" aria-label="Previous">
                    <span aria-hidden="true">
                        <span class="lnr lnr-chevron-left"><<</span>
                    </span>
                </a>{% endif %}
            </li>
            {% for i in blogs.paginator.page_range %}
                {% if blogs.number == i %}
                    <li id="page-item active" style="padding: 4px 12px; color: white; background: #84c1c5"><span>{{ i }} </span></li>
                {% elif i > blogs.number|add:'-7' and i < blogs.number|add:'7' %}
                <li id="page-item "><a href="?page={{i}}" class="page-link">{{i}}</a></li>
                {% endif %}
            {% endfor %} 
            <li id="page-item">{% if blogs.has_next %}
                <a href="?page={{blogs.next_page_number}}" class="page-link" aria-label="Next">
                    <span aria-hidden="true">
                        <span class="lnr lnr-chevron-right"> >> </span>
                    </span>
                </a>{% endif %}
            </li>
        </ul>
			</div>
    </nav>
{% endblock content %}

		